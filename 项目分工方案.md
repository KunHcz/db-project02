# 智能家居设备日志管理系统 - 5人小组分工方案

## 📊 项目代码量统计

- **后端代码**：811行（Flask + MongoDB）
- **前端代码**：1041行（HTML + JavaScript + CSS）
- **脚本代码**：528行（数据导入、备份）
- **配置文件**：Docker、数据库初始化等
- **文档**：项目报告、README等

**总计**：约2380行代码 + 配置 + 文档

---

## 👥 分工方案（5人）

### 人员1：后端核心开发 + 数据库设计 ⭐
**工作量**：⭐⭐⭐（中等偏重，技术核心）

**负责内容**：
1. **MongoDB数据库设计**
   - 设计数据模型（devices、device_logs集合）
   - 设计索引（地理位置索引、TTL索引、复合索引、全文搜索索引）
   - 编写数据库初始化脚本（`data/init_db.js`）
   - 数据库优化和性能调优

2. **后端核心框架**
   - Flask应用主文件（`code/backend/app.py`）
   - MongoDB连接配置
   - 数据模型定义（`code/backend/models.py`）
   - 工具函数（`code/backend/utils.py`）

3. **项目文档 - 数据库设计部分**
   - 数据需求分析
   - 数据库设计（ER图、关系模式、规范化）
   - MongoDB索引设计说明

**代码文件**：
- `code/backend/app.py` (96行)
- `code/backend/models.py` (70行)
- `code/backend/utils.py` (89行)
- `data/init_db.js` (60行)

**工作量评估**：约315行代码 + 数据库设计 + 文档

---

### 人员2：设备管理模块开发 ⭐
**工作量**：⭐⭐⭐（中等，功能完整）

**负责内容**：
1. **设备管理后端API**
   - 设备CRUD接口（`code/backend/routes/device_routes.py`）
   - 设备统计接口
   - 地理位置查询接口（$near查询）

2. **设备管理前端页面**
   - 设备列表页面（`code/frontend/index.html`）
   - 设备管理JavaScript（`code/frontend/static/js/device.js`）
   - 设备添加/编辑表单
   - 设备筛选和搜索功能

3. **项目文档 - 设备管理功能说明**
   - 设备管理功能设计
   - API接口文档（设备相关）

**代码文件**：
- `code/backend/routes/device_routes.py` (256行)
- `code/frontend/index.html` (217行)
- `code/frontend/static/js/device.js` (263行)

**工作量评估**：约736行代码 + 文档

---

### 人员3：日志管理模块开发 ⭐
**工作量**：⭐⭐⭐（中等，功能完整）

**负责内容**：
1. **日志管理后端API**
   - 日志CRUD接口（`code/backend/routes/log_routes.py`）
   - 日志聚合统计接口（聚合管道查询）
   - 全文搜索接口
   - 时间范围查询优化

2. **日志查询前端页面**
   - 日志查询页面（`code/frontend/logs.html`）
   - 日志管理JavaScript（`code/frontend/static/js/logs.js`）
   - 日志筛选和搜索功能
   - 统计图表展示（Chart.js集成）

3. **项目文档 - 日志管理功能说明**
   - 日志管理功能设计
   - API接口文档（日志相关）
   - MongoDB聚合查询说明

**代码文件**：
- `code/backend/routes/log_routes.py` (200行)
- `code/frontend/logs.html` (192行)
- `code/frontend/static/js/logs.js` (339行)

**工作量评估**：约731行代码 + 文档

---

### 人员4：部署与运维 + 数据脚本 ⭐
**工作量**：⭐⭐（较轻，但重要）

**负责内容**：
1. **Docker部署配置**
   - Docker Compose配置（`docker-compose.yml`）
   - Dockerfile编写（`Dockerfile`）
   - 启动脚本（`start.sh`）
   - 环境配置和优化

2. **数据脚本开发**
   - 数据导入脚本（`code/scripts/import_data.py`）
   - 数据库备份脚本（`code/scripts/backup_db.py`）
   - 示例数据生成（80个设备，12000条日志）

3. **前端样式优化**
   - CSS样式文件（`code/frontend/static/css/style.css`）
   - 页面美化

4. **项目文档 - 部署与运维部分**
   - 环境配置说明
   - 部署指南
   - 使用说明

**代码文件**：
- `docker-compose.yml` (52行)
- `Dockerfile` (24行)
- `start.sh` (49行)
- `code/scripts/import_data.py` (315行)
- `code/scripts/backup_db.py` (213行)
- `code/frontend/static/css/style.css` (50行)

**工作量评估**：约703行代码 + 部署配置 + 文档

---

### 人员5：项目文档 + 测试 + 整合 ⭐
**工作量**：⭐⭐（文档工作量大，但代码少）

**负责内容**：
1. **项目文档编写**（重点）
   - 项目报告主文档（按课程要求格式）
   - 数据库应用业务背景介绍（300字）
   - 数据库应用开发设计说明
   - 系统原型示例说明
   - 课程项目应用总结（300字）
   - 参考文献整理

2. **README和用户文档**
   - README.md（项目说明）
   - 运行指南.md
   - 快速测试指南.md
   - API接口文档

3. **系统测试**
   - 功能测试
   - 性能测试
   - 多客户端并发测试
   - 测试报告编写

4. **代码整合与优化**
   - 代码审查
   - Bug修复
   - 代码风格统一
   - Git版本管理

**文档文件**：
- 项目报告（Word/PDF格式）
- README.md
- 运行指南.md
- 快速测试指南.md
- 测试报告

**工作量评估**：文档编写（约5000-8000字）+ 测试 + 整合

---

## 📋 分工原则说明

### ✅ 公平性保证

1. **代码量平衡**
   - 人员1：315行 + 数据库设计
   - 人员2：736行
   - 人员3：731行
   - 人员4：703行
   - 人员5：文档 + 测试（工作量相当）

2. **技术难度平衡**
   - 人员1：数据库设计（核心，需要专业知识）
   - 人员2/3：前后端开发（标准开发工作）
   - 人员4：DevOps（部署运维，实用技能）
   - 人员5：文档（写作能力，重要但代码少）

3. **工作内容互补**
   - 每个人负责独立模块，减少冲突
   - 文档工作单独分配，避免遗漏
   - 测试和整合工作确保项目质量

### 🎯 避免抱怨的策略

1. **明确职责边界**
   - 每个模块独立，减少相互依赖
   - 接口定义清晰，便于并行开发

2. **工作量透明**
   - 代码行数公开，工作量可量化
   - 文档工作明确，避免误解

3. **技术价值平衡**
   - 核心开发（人员1）：技术挑战高
   - 功能开发（人员2/3）：标准开发，代码量大
   - 运维部署（人员4）：实用技能，代码适中
   - 文档测试（人员5）：重要但代码少，适合写作能力强的人

---

## 📅 开发时间线建议（2周）

### 第1周

**Day 1-2：需求分析与设计**
- 人员1：数据库设计、ER图
- 人员5：业务背景、需求分析文档

**Day 3-5：核心开发**
- 人员1：后端框架搭建、数据库初始化
- 人员2：设备管理后端API开发
- 人员3：日志管理后端API开发
- 人员4：Docker配置、环境搭建

**Day 6-7：前端开发**
- 人员2：设备管理前端页面
- 人员3：日志查询前端页面
- 人员4：样式优化

### 第2周

**Day 8-10：功能完善**
- 人员2/3：前后端联调、功能完善
- 人员4：数据脚本开发、部署优化
- 人员1：性能优化、索引调优

**Day 11-12：测试与文档**
- 人员5：全面测试、Bug记录
- 所有人员：修复Bug
- 人员5：项目报告编写

**Day 13-14：整合与提交**
- 人员5：代码整合、文档完善
- 所有人员：最终检查
- 提交项目

---

## 🔄 协作方式

### Git工作流

1. **分支策略**
   - `main`：主分支（稳定版本）
   - `dev`：开发分支
   - `feature/模块名`：功能分支（每人一个）

2. **提交规范**
   ```
   [人员X] 功能描述
   例如：[人员2] 完成设备管理前端页面
   ```

3. **代码审查**
   - 合并到dev前需要至少1人审查
   - 合并到main前需要全员确认

### 沟通机制

1. **每日站会**（10分钟）
   - 昨天完成什么
   - 今天计划做什么
   - 遇到什么问题

2. **周会**（30分钟）
   - 进度检查
   - 问题讨论
   - 下周计划

---

## 📝 文档分工明细

### 项目报告（人员5主负责，其他人配合）

1. **数据库应用业务背景介绍（300字）**
   - 人员5：撰写
   - 其他人：提供素材和建议

2. **数据需求分析**
   - 人员1：数据库需求
   - 人员5：整理成文档

3. **数据库设计**
   - 人员1：ER图、关系模式、规范化
   - 人员5：整理成文档

4. **数据库应用开发设计**
   - 人员2：设备管理功能设计
   - 人员3：日志管理功能设计
   - 人员4：部署设计
   - 人员5：整合成文档

5. **系统原型示例**
   - 所有人员：提供截图和说明
   - 人员5：整理成文档

6. **课程项目应用总结（300字）**
   - 人员5：撰写
   - 其他人：提供建议

---

## ✅ 验收标准

### 代码质量
- ✅ 代码通过测试
- ✅ 无严重Bug
- ✅ 代码风格统一
- ✅ 注释完整

### 文档质量
- ✅ 项目报告格式正确
- ✅ 内容完整，符合要求
- ✅ README清晰易懂
- ✅ API文档完整

### 功能完整性
- ✅ 所有功能正常工作
- ✅ MongoDB特色功能展示完整
- ✅ 前端页面美观易用

---

## 🎁 额外建议

### 提升项目质量

1. **代码优化**
   - 添加错误处理
   - 性能优化
   - 代码注释完善

2. **功能增强**
   - 添加数据导出功能
   - 添加更多统计图表
   - 优化用户体验

3. **文档完善**
   - 添加架构图
   - 添加部署流程图
   - 添加API使用示例

---

## 📞 分工确认

请每位成员确认自己的分工，如有异议及时提出调整。

**分工原则**：公平、合理、互补、可执行

**目标**：高质量完成项目，每个人都能学到东西，没有人抱怨！

---

**制定时间**：2025年12月17日  
**项目周期**：2周  
**小组成员**：5人

